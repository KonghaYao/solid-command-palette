<pre class="shiki" style="background-color: #0d1117"><code><span class="line"><span style="color: #FF7B72">import</span><span style="color: #C9D1D9"> { defineAction } </span><span style="color: #FF7B72">from</span><span style="color: #C9D1D9"> </span><span style="color: #A5D6FF">&#39;@cn-ui/command-palette&#39;</span><span style="color: #C9D1D9">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #FF7B72">export</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">const</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">myAction</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> </span><span style="color: #D2A8FF">defineAction</span><span style="color: #C9D1D9">({</span></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #8B949E">/* Unique identifier for your action */</span></span>
<span class="line"><span style="color: #C9D1D9">  id: </span><span style="color: #A5D6FF">&#39;my-action&#39;</span><span style="color: #C9D1D9">,</span></span>
<span class="line"></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #8B949E">/* Nest current action inside a parent action */</span></span>
<span class="line"><span style="color: #C9D1D9">  parentActionId: </span><span style="color: #A5D6FF">&#39;my-parent-action&#39;</span><span style="color: #C9D1D9">,</span></span>
<span class="line"></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #8B949E">/* Short heading. Visible and Searchable */</span></span>
<span class="line"><span style="color: #C9D1D9">  title: </span><span style="color: #A5D6FF">&#39;My Action&#39;</span><span style="color: #C9D1D9">,</span></span>
<span class="line"></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #8B949E">/* Long description. Visible and Searchable */</span></span>
<span class="line"><span style="color: #C9D1D9">  subtitle: </span><span style="color: #A5D6FF">&#39;My Action&#39;</span><span style="color: #C9D1D9">,</span></span>
<span class="line"></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #8B949E">/* Other words to identify action. Hidden but Searchable */</span></span>
<span class="line"><span style="color: #C9D1D9">  keywords: [</span><span style="color: #A5D6FF">&#39;example&#39;</span><span style="color: #C9D1D9">, </span><span style="color: #A5D6FF">&#39;command&#39;</span><span style="color: #C9D1D9">],</span></span>
<span class="line"></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #8B949E">/* Keyboard shortcut for action. $mod = Cmd (Mac) / Ctrl (Win) */</span></span>
<span class="line"><span style="color: #C9D1D9">  shortcut: </span><span style="color: #A5D6FF">&#39;$mod+e&#39;</span><span style="color: #C9D1D9">,</span></span>
<span class="line"></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #8B949E">/* Condition for allowing action */</span></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #D2A8FF">cond</span><span style="color: #C9D1D9">: ({ </span><span style="color: #FFA657">actionId</span><span style="color: #C9D1D9">, </span><span style="color: #FFA657">rootContext</span><span style="color: #C9D1D9">, </span><span style="color: #FFA657">dynamicContext</span><span style="color: #C9D1D9"> }) </span><span style="color: #FF7B72">=&gt;</span><span style="color: #C9D1D9"> {</span></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #FF7B72">const</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">isAllowed</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> </span><span style="color: #D2A8FF">someLogic</span><span style="color: #C9D1D9">({ rootContext, dynamicContext });</span></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #FF7B72">return</span><span style="color: #C9D1D9"> isAllowed;</span></span>
<span class="line"><span style="color: #C9D1D9">  },</span></span>
<span class="line"></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #8B949E">/* Code to execute when action is triggered */</span></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #D2A8FF">run</span><span style="color: #C9D1D9">: ({ </span><span style="color: #FFA657">actionId</span><span style="color: #C9D1D9">, </span><span style="color: #FFA657">rootContext</span><span style="color: #C9D1D9">, </span><span style="color: #FFA657">dynamicContext</span><span style="color: #C9D1D9"> }) </span><span style="color: #FF7B72">=&gt;</span><span style="color: #C9D1D9"> {</span></span>
<span class="line"><span style="color: #C9D1D9">    console.</span><span style="color: #D2A8FF">log</span><span style="color: #C9D1D9">(</span><span style="color: #A5D6FF">&#39;Run&#39;</span><span style="color: #C9D1D9">, actionId);</span></span>
<span class="line"><span style="color: #C9D1D9">    rootContext.</span><span style="color: #D2A8FF">incrementCount</span><span style="color: #C9D1D9">();</span></span>
<span class="line"><span style="color: #C9D1D9">    rootContext.</span><span style="color: #D2A8FF">deleteMessage</span><span style="color: #C9D1D9">(dynamicContext.messageId);</span></span>
<span class="line"><span style="color: #C9D1D9">  },</span></span>
<span class="line"><span style="color: #C9D1D9">});</span></span>
<span class="line"></span></code></pre>
